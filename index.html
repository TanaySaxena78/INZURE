<!DOCTYPE html>
<html lang="en">

<head>
       <meta charset="UTF-8">
       <meta name="viewport" content="width=device-width, initial-scale=1.0">
       <title>Inzure - FNOL</title>
       <script src="https://cdn.tailwindcss.com"></script>
       <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.0/flowbite.min.css" rel="stylesheet" />
       <link rel="stylesheet" href="css/styles.css">
       <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.0/flowbite.min.js"></script>
       <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.10.2/lottie.min.js"></script>
       <!-- Icons -->
       <script src="https://unpkg.com/lucide@latest"></script>
       <style>
              /* Custom Gradient Background */
              body {
                     background: linear-gradient(135deg, #f0f4ff 0%, #e0e7ff 100%);
                     min-height: 100vh;
              }

              .glass-panel {
                     background: rgba(255, 255, 255, 0.85);
                     backdrop-filter: blur(12px);
                     border: 1px solid rgba(255, 255, 255, 0.3);
              }

              .gradient-text {
                     background: linear-gradient(to right, #2563eb, #4f46e5);
                     -webkit-background-clip: text;
                     background-clip: text;
                     -webkit-text-fill-color: transparent;
              }
       </style>
</head>

<body class="text-gray-800">

       <!-- Navbar -->
       <nav
              class="bg-white/90 backdrop-blur-md border-b border-gray-200 px-4 py-3 fixed left-0 right-0 top-0 z-50 shadow-sm">
              <div class="max-w-7xl mx-auto flex flex-wrap justify-between items-center">
                     <div class="flex justify-start items-center gap-2">
                            <div class="bg-blue-600 text-white p-1.5 rounded-lg">
                                   <i data-lucide="shield-check" class="w-6 h-6"></i>
                            </div>
                            <span class="self-center text-xl font-bold whitespace-nowrap text-gray-900">Inzure</span>
                     </div>
                     <div class="flex items-center lg:order-2">
                            <a href="dashboard.html"
                                   class="text-gray-600 hover:text-blue-600 font-medium rounded-lg text-sm px-4 py-2 transition flex items-center gap-2">
                                   <i data-lucide="user-cog" class="w-4 h-4"></i>
                                   Adjuster Login
                            </a>
                     </div>
              </div>
       </nav>

       <!-- Main Content -->
       <div class="pt-24 pb-12 px-4 max-w-7xl mx-auto">

              <!-- Header Section -->
              <div class="mb-10 text-center max-w-2xl mx-auto">
                     <h1 class="text-4xl font-extrabold mb-3 gradient-text">File a New Claim</h1>
                     <p class="text-lg text-gray-600">Our AI-powered assistant will guide you through the process,
                            analyze your damage instantly, and expedite your payout.</p>
              </div>

              <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

                     <!-- LEFT COLUMN: Form (2/3 width) -->
                     <div class="lg:col-span-2 space-y-6">
                            <div class="glass-panel rounded-2xl shadow-xl p-6 md:p-8 animate-fade-in">
                                   <div class="flex items-center gap-3 mb-6 border-b border-gray-100 pb-4">
                                          <div class="bg-blue-100 text-blue-600 p-2 rounded-full">
                                                 <i data-lucide="file-text" class="w-5 h-5"></i>
                                          </div>
                                          <h2 class="text-xl font-bold text-gray-800">Incident Details</h2>
                                   </div>

                                   <form id="fnolForm" class="space-y-6">
                                          <!-- Personal Info -->
                                          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                                 <div>
                                                        <label for="name"
                                                               class="block mb-2 text-sm font-semibold text-gray-700">Full
                                                               Name</label>
                                                        <div class="relative">
                                                               <div
                                                                      class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                                                                      <i data-lucide="user"
                                                                             class="w-4 h-4 text-gray-400"></i>
                                                               </div>
                                                               <input type="text" id="name" value="Tanay"
                                                                      class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-xl focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-3 transition shadow-sm"
                                                                      placeholder="John Doe" required>
                                                        </div>
                                                 </div>
                                                 <div>
                                                        <label for="policy"
                                                               class="block mb-2 text-sm font-semibold text-gray-700">Policy
                                                               Number</label>
                                                        <div class="relative">
                                                               <div
                                                                      class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
                                                                      <i data-lucide="file-badge"
                                                                             class="w-4 h-4 text-gray-400"></i>
                                                               </div>
                                                               <input type="text" id="policy"
                                                                      class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-xl focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-3 transition shadow-sm"
                                                                      placeholder="POL-XXXXXX" required>
                                                        </div>
                                                 </div>
                                          </div>

                                          <!-- Incident Description -->
                                          <div>
                                                 <label for="description"
                                                        class="block mb-2 text-sm font-semibold text-gray-700">What
                                                        Happened?</label>
                                                 <div class="relative">
                                                        <textarea id="description" rows="4"
                                                               class="block p-4 w-full text-sm text-gray-900 bg-gray-50 rounded-xl border border-gray-300 focus:ring-blue-500 focus:border-blue-500 shadow-sm transition"
                                                               placeholder="Please describe the incident in detail (e.g., 'I was rear-ended at a stop light on Main St...')"
                                                               required></textarea>
                                                        <div class="absolute bottom-3 right-3 text-gray-400">
                                                               <i data-lucide="message-square" class="w-4 h-4"></i>
                                                        </div>
                                                 </div>
                                                 <p class="mt-2 text-xs text-gray-500 flex items-center gap-1">
                                                        <i data-lucide="info" class="w-3 h-3"></i>
                                                        Tip: Mention specific damage areas like "bumper", "hood", or
                                                        "door".
                                                 </p>
                                          </div>

                                          <!-- Unified Upload Box -->
                                          <div class="mt-8">
                                                 <label class="block mb-2 text-sm font-semibold text-gray-700">Damage
                                                        Photos</label>
                                                 <div
                                                        class="border-2 border-dashed border-blue-200 rounded-2xl bg-blue-50/50 p-6 transition hover:bg-blue-50 hover:border-blue-400">

                                                        <!-- Dropzone Trigger -->
                                                        <label for="dropzone-file"
                                                               class="flex flex-col items-center justify-center w-full h-40 cursor-pointer rounded-xl hover:bg-white/60 transition group">
                                                               <div class="flex flex-col items-center pt-5 pb-6">
                                                                      <div
                                                                             class="bg-white p-3 rounded-full shadow-sm mb-3 group-hover:scale-110 transition duration-300">
                                                                             <i data-lucide="camera"
                                                                                    class="w-8 h-8 text-blue-500"></i>
                                                                      </div>
                                                                      <p class="text-sm font-medium text-gray-700">Click
                                                                             to upload photos</p>
                                                                      <p class="text-xs text-gray-500 mt-1">or drag and
                                                                             drop (Max 5)</p>
                                                               </div>
                                                               <input id="dropzone-file" type="file" class="hidden"
                                                                      accept="image/*" multiple />
                                                        </label>

                                                        <!-- IMAGE PREVIEW GRID -->
                                                        <div id="imagePreviewContainer"
                                                               class="grid grid-cols-2 md:grid-cols-3 gap-4 mt-6 w-full empty:hidden">
                                                               <!-- Previews injected here -->
                                                        </div>
                                                 </div>
                                          </div>

                                          <!-- Submit Button -->
                                          <button type="submit" id="submitBtn"
                                                 class="w-full text-white bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 focus:ring-4 focus:ring-blue-300 font-bold rounded-xl text-lg px-5 py-4 text-center flex justify-center items-center gap-3 shadow-lg hover:shadow-xl transform transition hover:-translate-y-1">
                                                 <i data-lucide="sparkles" class="w-5 h-5"></i>
                                                 Analyze & Submit Claim
                                          </button>
                                   </form>
                            </div>
                     </div>

                     <!-- RIGHT COLUMN: Widgets (1/3 width) -->
                     <div class="space-y-6">

                            <!-- Process Guide Widget -->
                            <div class="glass-panel rounded-2xl shadow-lg p-6">
                                   <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                                          <i data-lucide="map" class="w-5 h-5 text-blue-600"></i>
                                          Claim Process
                                   </h3>
                                   <ol class="relative border-l border-gray-200 ml-3 space-y-6">
                                          <li class="mb-10 ml-6">
                                                 <span
                                                        class="absolute flex items-center justify-center w-8 h-8 bg-blue-100 rounded-full -left-4 ring-4 ring-white">
                                                        <i data-lucide="edit-3" class="w-4 h-4 text-blue-600"></i>
                                                 </span>
                                                 <h3 class="font-medium leading-tight text-blue-600">1. File Details
                                                 </h3>
                                                 <p class="text-sm text-gray-500">Provide incident info & photos.</p>
                                          </li>
                                          <li class="mb-10 ml-6">
                                                 <span
                                                        class="absolute flex items-center justify-center w-8 h-8 bg-gray-100 rounded-full -left-4 ring-4 ring-white">
                                                        <i data-lucide="cpu" class="w-4 h-4 text-gray-500"></i>
                                                 </span>
                                                 <h3 class="font-medium leading-tight text-gray-900">2. AI Analysis</h3>
                                                 <p class="text-sm text-gray-500">Instant damage assessment.</p>
                                          </li>
                                          <li class="mb-10 ml-6">
                                                 <span
                                                        class="absolute flex items-center justify-center w-8 h-8 bg-gray-100 rounded-full -left-4 ring-4 ring-white">
                                                        <i data-lucide="check-circle-2"
                                                               class="w-4 h-4 text-gray-500"></i>
                                                 </span>
                                                 <h3 class="font-medium leading-tight text-gray-900">3. Review</h3>
                                                 <p class="text-sm text-gray-500">Confirm & submit to adjuster.</p>
                                          </li>
                                          <li class="ml-6">
                                                 <span
                                                        class="absolute flex items-center justify-center w-8 h-8 bg-gray-100 rounded-full -left-4 ring-4 ring-white">
                                                        <i data-lucide="banknote" class="w-4 h-4 text-gray-500"></i>
                                                 </span>
                                                 <h3 class="font-medium leading-tight text-gray-900">4. Payout</h3>
                                                 <p class="text-sm text-gray-500">Fast track settlement.</p>
                                          </li>
                                   </ol>
                            </div>

                            <!-- Photo Tips Widget -->
                            <div
                                   class="bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl shadow-lg p-6 text-white">
                                   <h3 class="text-lg font-bold mb-4 flex items-center gap-2">
                                          <i data-lucide="camera" class="w-5 h-5"></i>
                                          Photo Tips
                                   </h3>
                                   <ul class="space-y-3 text-sm text-indigo-100">
                                          <li class="flex items-start gap-2">
                                                 <i data-lucide="check" class="w-4 h-4 mt-0.5 text-green-300"></i>
                                                 <span>Take photos from <strong>4 corners</strong> of the
                                                        vehicle.</span>
                                          </li>
                                          <li class="flex items-start gap-2">
                                                 <i data-lucide="check" class="w-4 h-4 mt-0.5 text-green-300"></i>
                                                 <span>Ensure good lighting and avoid blur.</span>
                                          </li>
                                          <li class="flex items-start gap-2">
                                                 <i data-lucide="check" class="w-4 h-4 mt-0.5 text-green-300"></i>
                                                 <span>Include close-ups of specific damage.</span>
                                          </li>
                                   </ul>
                            </div>

                            <!-- Need Help Widget -->
                            <div class="glass-panel rounded-2xl shadow-lg p-6">
                                   <h3 class="text-lg font-bold text-gray-800 mb-2">Need Help?</h3>
                                   <p class="text-sm text-gray-500 mb-4">Our support team is available 24/7 for
                                          emergency assistance.</p>
                                   <button
                                          class="w-full border border-gray-300 text-gray-700 hover:bg-gray-50 font-medium rounded-lg text-sm px-4 py-2.5 flex items-center justify-center gap-2 transition">
                                          <i data-lucide="phone" class="w-4 h-4"></i>
                                          Call Support
                                   </button>
                            </div>

                     </div>
              </div>
       </div>

       <!-- Analysis Modal -->
       <div id="analysisModal" tabindex="-1" aria-hidden="true"
              class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-modal md:h-full bg-gray-900/60 backdrop-blur-sm">
              <div class="relative p-4 w-full max-w-2xl h-full md:h-auto">
                     <!-- Modal content -->
                     <div class="relative bg-white rounded-2xl shadow-2xl overflow-hidden">
                            <!-- Modal header -->
                            <div class="flex justify-between items-start p-5 border-b border-gray-100 bg-gray-50">
                                   <h3 class="text-xl font-bold text-gray-900 flex items-center gap-2">
                                          <i data-lucide="cpu" class="w-5 h-5 text-blue-600"></i>
                                          AI Agent Analysis
                                   </h3>
                                   <button type="button"
                                          class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center transition"
                                          data-modal-toggle="analysisModal" id="closeModalBtn">
                                          <i data-lucide="x" class="w-5 h-5"></i>
                                   </button>
                            </div>
                            <!-- Modal body -->
                            <div class="p-6 space-y-6">
                                   <!-- Loading State -->
                                   <div id="loadingState" class="text-center py-8">
                                          <div id="lottieContainer" class="flex justify-center h-48 mb-4"></div>
                                          <h4 class="text-xl font-semibold text-gray-800 mb-2">Analyzing Damage...</h4>
                                          <p class="text-gray-500">Our AI is inspecting your photos for damage severity
                                                 and fraud risk.</p>
                                   </div>

                                   <!-- Results State -->
                                   <div id="resultsState" class="hidden animate-fade-in">
                                          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                                 <!-- Severity Card -->
                                                 <div class="bg-blue-50 p-5 rounded-xl border border-blue-100">
                                                        <div class="flex justify-between items-start mb-2">
                                                               <h4 class="font-bold text-blue-900">Severity</h4>
                                                               <span id="severityLabel"
                                                                      class="bg-blue-200 text-blue-800 text-xs font-bold px-2 py-1 rounded-md">Medium</span>
                                                        </div>
                                                        <div class="w-full bg-blue-200 rounded-full h-2.5 mb-3">
                                                               <div id="severityBar"
                                                                      class="bg-blue-600 h-2.5 rounded-full transition-all duration-1000"
                                                                      style="width: 0%"></div>
                                                        </div>
                                                        <p class="text-sm text-blue-700">Est. Payout: <span
                                                                      id="payoutAmount"
                                                                      class="font-bold text-lg text-blue-900">$0</span>
                                                        </p>
                                                 </div>

                                                 <!-- Fraud Card -->
                                                 <div class="bg-red-50 p-5 rounded-xl border border-red-100">
                                                        <div class="flex justify-between items-start mb-2">
                                                               <h4 class="font-bold text-red-900">Fraud Risk</h4>
                                                               <span id="fraudLabel"
                                                                      class="bg-red-200 text-red-800 text-xs font-bold px-2 py-1 rounded-md">Low</span>
                                                        </div>
                                                        <div class="w-full bg-red-200 rounded-full h-2.5 mb-3">
                                                               <div id="fraudBar"
                                                                      class="bg-red-600 h-2.5 rounded-full transition-all duration-1000"
                                                                      style="width: 0%"></div>
                                                        </div>
                                                        <p class="text-sm text-red-700">Risk Score: <span
                                                                      id="fraudScore"
                                                                      class="font-bold text-lg text-red-900">0%</span>
                                                        </p>
                                                 </div>
                                          </div>

                                          <div class="bg-gray-50 rounded-xl p-5 border border-gray-100">
                                                 <h4 class="font-bold text-gray-900 mb-3 flex items-center gap-2">
                                                        <i data-lucide="search" class="w-4 h-4 text-gray-500"></i>
                                                        Analysis Summary
                                                 </h4>
                                                 <p id="aiExplanation"
                                                        class="text-sm text-gray-600 mb-4 italic border-l-4 border-blue-500 pl-3">
                                                        "Analysis pending..."</p>
                                                 <h5
                                                        class="text-xs font-bold text-gray-500 uppercase tracking-wide mb-2">
                                                        Key Evidence</h5>
                                                 <ul id="evidenceList" class="space-y-2 text-sm text-gray-700">
                                                        <!-- Populated by JS -->
                                                 </ul>
                                          </div>
                                   </div>
                            </div>
                            <!-- Modal footer -->
                            <div class="flex items-center p-6 space-x-3 rounded-b border-t border-gray-100 bg-gray-50">
                                   <button id="confirmClaimBtn" type="button"
                                          class="text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 font-bold rounded-xl text-sm px-6 py-3 text-center disabled:opacity-50 disabled:cursor-not-allowed transition shadow-md flex-1">
                                          Submit Claim
                                   </button>
                                   <button data-modal-toggle="analysisModal" type="button"
                                          class="text-gray-600 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-xl border border-gray-300 text-sm font-medium px-6 py-3 hover:text-gray-900 focus:z-10 transition">
                                          Cancel
                                   </button>
                            </div>
                     </div>
              </div>
       </div>

       <!-- Lightbox -->
       <div id="lightbox" style="
        position: fixed; inset: 0;
        background: rgba(0,0,0,0.9);
        backdrop-filter: blur(5px);
        display: none; justify-content: center;
        align-items: center; z-index: 9999;
        cursor: zoom-out;">
              <img id="lightboxImage"
                     style="max-width:90%; max-height:90%; border-radius:8px; box-shadow: 0 20px 50px rgba(0,0,0,0.5);">
       </div>

       <script src="js/storage.js"></script>
       <script src="js/ai-simulator.js"></script>
       <script src="js/app.js"></script>
       <script>
              lucide.createIcons();
       </script>
</body>

</html>